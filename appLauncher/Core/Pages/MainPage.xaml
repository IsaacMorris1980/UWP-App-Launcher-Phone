<Page
    x:Class="appLauncher.Core.Pages.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:controls="using:Microsoft.Toolkit.Uwp.UI.Controls"
    xmlns:helper="using:appLauncher.Core.Helpers"
    xmlns:models="using:appLauncher.Core.Model"
    mc:Ignorable="d"
    Loaded="Page_Loaded"
    PointerEntered="Page_PointerEntered"
    Background="{x:Bind helper:SettingsHelper.totalAppSettings.AppBackgroundColorBrush}"
     >

        <!--#region  All Apps-->
        <Grid Name="AppListViewGrid"
             
              Visibility="Visible">
            <Grid.RowDefinitions>
                <RowDefinition Height="100" />
                <RowDefinition Height="*"/>
                <RowDefinition Height="100" />
            </Grid.RowDefinitions>
        <controls:RotatorTile x:Load="{x:Bind helper:SettingsHelper.totalAppSettings.BgImagesAvailable}" x:Name="backimage" ItemsSource="{x:Bind helper:ImageHelper.backgroundImage}" Direction="Left" >
            <controls:RotatorTile.ItemTemplate>
                <DataTemplate x:DataType="models:PageBackgrounds" >
                    <Image Stretch="UniformToFill" Source="{x:Bind pageBackgroundDisplayImage}" />
                </DataTemplate>
            </controls:RotatorTile.ItemTemplate>
        </controls:RotatorTile>
        <Grid Grid.Row="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                 >
                <RelativePanel HorizontalAlignment="Stretch" BorderThickness="2" 
                               VerticalAlignment="Stretch">
                    <AppBarButton Foreground="{x:Bind helper:SettingsHelper.totalAppSettings.AppForegroundColorBrush}"
                                  Label="Settings" LabelPosition="Default" Margin="25,20,20,0" x:Name="SettingsPage" Content="Settings" RelativePanel.AlignLeftWithPanel="True"  Tapped="SettingsPage_Tapped" Icon="Setting"
                        
                               />
                      <AutoSuggestBox PlaceholderText="Search for Apps" x:Name="SearchField" RelativePanel.AlignHorizontalCenterWithPanel="True" VerticalAlignment="Top"
                                    Background="{x:Bind helper:SettingsHelper.totalAppSettings.AppBackgroundColorBrush}"
                                    Foreground="{x:Bind helper:SettingsHelper.totalAppSettings.AppForegroundColorBrush}"
                                    Margin="50,30,0,0"
                                    TextChanged="SearchField_TextChanged"
                                    SuggestionChosen="SearchField_SuggestionChosen"
                                    Width="200"
                                   >
                        <AutoSuggestBox.Resources>
                            <DataTemplate x:Key="ComboTemplate" x:DataType="models:Apps">

                                <Grid ToolTipService.ToolTip="{x:Bind Tip}" VerticalAlignment="Bottom" HorizontalAlignment="Stretch" Margin="0,10,0,10" >
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="50" />
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Canvas Grid.Column="0" Background="{x:Bind LogoBrush}" Height="50" Width="50" />
                                    <TextBlock Grid.Column="1" Text="{x:Bind Name}" 
                                                   VerticalAlignment="Center"
                                                   Margin="4,0,0,0"
                                                   FontSize="16" 
                                              TextWrapping="Wrap"
                                                   Foreground="{x:Bind TextBrush}"/>
                                </Grid>
                            </DataTemplate>
                        </AutoSuggestBox.Resources>
                        <AutoSuggestBox.ItemTemplate>
                            <StaticResource ResourceKey="ComboTemplate"/>
                        </AutoSuggestBox.ItemTemplate>

                    </AutoSuggestBox>

                </RelativePanel>
            </Grid>
        <Grid Grid.Row="1">
            <GridView x:Name="GridViewMain" Margin="45,0,45,0" Padding="12" CanDrag="True" 
                      CanDragItems="True" AllowDrop="True" DragOver="GridViewMain_DragOver"
                      IsItemClickEnabled="True" DragItemsStarting="GridViewMain_DragItemsStarting"
                      Drop="GridViewMain_Drop" ItemClick="GridViewMain_ItemClick"
                  >
                <GridView.Resources>
                    <DataTemplate x:Key="GridViewMainDataTemplate" x:DataType="models:Apps">
                        <Grid Width="64" Height="84" Background="Transparent" >
                            <StackPanel ToolTipService.ToolTip="{x:Bind Tip}"
                                    Height="84" Width="64" Background="{x:Bind BackBrush}">
                                <Canvas Height="50" Width="50" Background="{x:Bind LogoBrush}" />
                                <TextBlock Name="appName" Text="{x:Bind Name}" 
                                       FontSize="12" 
                                       TextAlignment="Center" 
                                       MaxWidth="60" 
                                       FontWeight="SemiBold" 
                                       TextTrimming="CharacterEllipsis" 
                                       TextWrapping="WrapWholeWords"
                                       Foreground="{x:Bind TextBrush}"/>

                            </StackPanel>
                        </Grid>
                    </DataTemplate>
                </GridView.Resources>
                <GridView.ItemTemplate>
                    <StaticResource ResourceKey="GridViewMainDataTemplate"/>
                </GridView.ItemTemplate>
            </GridView>
            <ProgressRing x:Name="ProgressRing" Width="50" Height="50"/>
        </Grid>
                <RelativePanel Grid.Row="2" HorizontalAlignment="Stretch" 
                            >
                <controls:DropShadowPanel x:Name="Dropshadow" Canvas.ZIndex="100"
                                      Margin="10"
                                          Background="{x:Bind helper:SettingsHelper.totalAppSettings.AppBackgroundColorBrush}"
                                          Foreground="{x:Bind helper:SettingsHelper.totalAppSettings.AppForegroundColorBrush}"
                        VerticalAlignment="Bottom"
                        HorizontalAlignment="Center"
                                      HorizontalContentAlignment="Stretch"
                                      VerticalContentAlignment="Stretch"
                                      ShadowOpacity="0.2"
                                      BlurRadius="10"
                                      RelativePanel.AlignHorizontalCenterWithPanel="True"
                                      >
                    <StackPanel Name="flipViewIndicatorStackPanel"
                        Orientation="Horizontal"
                            Background="{x:Bind helper:SettingsHelper.totalAppSettings.AppBackgroundColorBrush}"
                        
                       />
                </controls:DropShadowPanel>

                <StackPanel Orientation="Horizontal" RelativePanel.Below="Dropshadow" RelativePanel.AlignHorizontalCenterWithPanel="True"  Margin="0" >
                    <TextBlock Text="Filter By" Width="55" Margin="20" TextAlignment="Right" Foreground="{x:Bind helper:SettingsHelper.totalAppSettings.AppForegroundColorBrush}"
                               />
                    <ComboBox Background="{x:Bind helper:SettingsHelper.totalAppSettings.AppBackgroundColorBrush}"
                              Foreground="{x:Bind helper:SettingsHelper.totalAppSettings.AppForegroundColorBrush}" Name="Filterby" Margin="20" Width="150" SelectionChanged="Filterby_SelectionChanged">
                        <ComboBoxItem Content="AtoZ" />
                        <ComboBoxItem Content="Developer" />
                        <ComboBoxItem Content="Installed" />
                    </ComboBox>
                </StackPanel>


            </RelativePanel>

        </Grid>
        <!--#endregion-->





    
</Page>