<Page
    x:Class="appLauncher.Core.Pages.AllApps"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:appLauncher.Core.Pages"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:modles="using:appLauncher.Core.Model" xmlns:helper="using:appLauncher.Core.Helpers" xmlns:selectors="using:appLauncher.Core.DataTemplateSelectors"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
    PointerEntered="Page_PointerEntered">
    <Page.Resources>
        <DataTemplate x:Key="FolderTemplate" x:DataType="modles:AppFolder">
            <RelativePanel x:Name="Folder" Height="84" Width="64" Background="Blue" Tapped="Folder_Tapped" RightTapped="Folder_RightTapped">
                <RelativePanel.ContextFlyout>
                    <MenuFlyout>
                        <MenuFlyoutItem Text="Edit Folder" Tapped="Editfolder_Tapped" />
                        <MenuFlyoutItem Text="Folder Info" Tapped="FolderInfo_Tapped" />
                    </MenuFlyout>
                </RelativePanel.ContextFlyout>
                <Canvas Height="50" Width="50" RelativePanel.AlignTopWithPanel="True" RelativePanel.AlignHorizontalCenterWithPanel="True" Background="{x:Bind BackBrush}" />
                <TextBlock Text="{x:Bind Name}" FontSize="12" TextAlignment="Left" FontWeight="SemiBold"
                           TextTrimming="CharacterEllipsis" TextWrapping="WrapWholeWords" Height="34" 
                           Foreground="{x:Bind TextBrush}" RelativePanel.AlignBottomWithPanel="True" RelativePanel.AlignHorizontalCenterWithPanel="True" />
            </RelativePanel>
        </DataTemplate>
        <DataTemplate x:Key="AppTemplate" x:DataType="modles:FinalTiles">
            <RelativePanel x:Name="Apps" Height="84" Width="64" Background="Blue" Tapped="Apps_Tapped" RightTapped="Apps_RightTapped">
                <RelativePanel.ContextFlyout>
                    <MenuFlyout>
                        <MenuFlyoutItem Text="Edit App" Tapped="EditApp_Tapped" />
                        <MenuFlyoutItem Text="App Info" Tapped="AppInfo_Tapped" />
                    </MenuFlyout>
                </RelativePanel.ContextFlyout>
                <Canvas Height="50" Width="50" RelativePanel.AlignTopWithPanel="True" RelativePanel.AlignHorizontalCenterWithPanel="True" Background="{x:Bind BackBrush}" />
                <TextBlock Text="{x:Bind Name}" FontSize="12" TextAlignment="Left" FontWeight="SemiBold"
           TextTrimming="CharacterEllipsis" TextWrapping="WrapWholeWords" Height="34" 
           Foreground="{x:Bind TextBrush}" RelativePanel.AlignBottomWithPanel="True" RelativePanel.AlignHorizontalCenterWithPanel="True" />
            </RelativePanel>
        </DataTemplate>
        <selectors:TileorFolderTemplateSelector x:Key="ApporFolderSelector" FolderTemplate="{StaticResource FolderTemplate}" TileTemplate="{StaticResource AppTemplate}" />
    </Page.Resources>
    <Grid 
          Name="rootGrid" HorizontalAlignment="Stretch"
        VerticalAlignment="Stretch"
        Background="Transparent">
        <Image Source="{Binding backImages}" Stretch="UniformToFill" />
        <Grid Name="AppListViewGrid"
         Visibility="Visible">
            <GridView HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Grid.Row="0"
                      PointerWheelChanged="GridViewMain_PointerWheelChanged" x:Name="GridViewMain"  Margin="10,0"  CanDrag="True" 
                      CanDragItems="True" AllowDrop="True" DragOver="GridViewMain_DragOver" IsItemClickEnabled="True" 
                      DragItemsStarting="GridViewMain_DragItemsStarting" Drop="GridViewMain_Drop" ItemClick="GridViewMain_ItemClick"
                      ItemTemplateSelector="{StaticResource ApporFolderSelector}"
                      ItemsSource="{x:Bind helper:PackageHelper.Apps}"
                      Loaded="GridViewMain_Loaded" 
                      BorderThickness="2"
                                          
                 />
        </Grid>
    </Grid>
</Page>